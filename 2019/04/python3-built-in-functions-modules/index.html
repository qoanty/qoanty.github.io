<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta name="generator" content="Hugo 0.54.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Python3 学习笔记（内建模块） | 百年孤独的博客</title>
    <meta property="og:title" content="Python3 学习笔记（内建模块） - 百年孤独的博客">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content="2019-04-21T11:58:09&#43;08:00">
        
        
    <meta property="article:modified_time" content="2019-04-21T11:58:09&#43;08:00">
        
    <meta name="Keywords" content="VPS, python, android, 博客, 小程序">
    <meta name="description" content="Python3 学习笔记（内建模块）">
        
    <meta name="author" content="百年孤独">
    <meta property="og:url" content="https://qoanty.github.io/2019/04/python3-built-in-functions-modules/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="/css/normalize.css">
    
        <link rel="stylesheet" href="/css/prism.css">
    
    <link rel="stylesheet" href="/css/style.css">
    <script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>

    


    
    
</head>

<body>
<header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://qoanty.github.io/">
                        百年孤独的博客
                    </a>
                
                <p class="description">艺术家用谎言揭露真相，政治家用谎言隐瞒真相</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://qoanty.github.io/">首页</a>
                    
                    <a  href="https://qoanty.github.io/tools/" title="工具">工具</a>
                    
                    <a  href="https://qoanty.github.io/archives/" title="归档">归档</a>
                    
                    <a  href="https://qoanty.github.io/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>


<div id="body">
    <div class="container">
        <div class="col-group">

            <div class="col-8" id="main">
                <div class="res-cons">
                    <article class="post">
                        <header>
                            <h1 class="post-title">Python3 学习笔记（内建模块）</h1>
                        </header>
                        <date class="post-meta meta-date">
                            2019年4月21日
                        </date>
                        
                        <div class="post-meta">
                            <span>|</span>
                            
                                <span class="meta-category"><a href="https://qoanty.github.io/categories/learn">Learn</a></span>
                            
                                <span class="meta-category"><a href="https://qoanty.github.io/categories/python">Python</a></span>
                            
                        </div>
                        
                        
                        
                        <div class="post-content">
                            

<h2 id="常用内建模块">常用内建模块</h2>

<h3 id="datetime">datetime</h3>

<p><strong>获取当前日期和时间</strong></p>

<pre><code class="language-python">&gt;&gt;&gt; from datetime import datetime
&gt;&gt;&gt; now = datetime.now()  # 获取当前datetime
&gt;&gt;&gt; print(now)
2019-05-15 19:34:57.142524
&gt;&gt;&gt; print(type(now))
&lt;class 'datetime.datetime'&gt;
&gt;&gt;&gt;
</code></pre>

<p>注意到<code>datetime</code>是模块，<code>datetime</code>模块还包含一个<code>datetime</code>类，通过<code>from datetime import datetime</code>导入的才是<code>datetime</code>这个类，如果仅导入<code>import datetime</code>，则必须引用全名<code>datetime.datetime</code>，<code>datetime.now()</code>返回当前日期和时间，其类型是<code>datetime</code>。</p>

<p><strong>获取指定日期和时间</strong></p>

<pre><code class="language-python">&gt;&gt;&gt; from datetime import datetime
&gt;&gt;&gt; dt = datetime(2019, 4, 18, 17, 20)   # 用指定日期时间创建datetime
&gt;&gt;&gt; print(dt)
2019-04-18 17:20:00
</code></pre>

<p><strong>datetime转换为timestamp</strong></p>

<p>我们把1970年1月1日 00:00:00 UTC+00:00时区的时刻称为epoch time，记为0（1970年以前的时间timestamp为负数），当前时间就是相对于epoch time的秒数，称为timestamp，与时区毫无关系。</p>

<pre><code class="language-python">&gt;&gt;&gt; from datetime import datetime
&gt;&gt;&gt; dt = datetime(2019, 4, 18, 17, 20)   # 用指定日期时间创建datetime
&gt;&gt;&gt; dt.timestamp()  # 把datetime转换为timestamp
1555579200.0
</code></pre>

<p><strong>timestamp转换为datetime</strong></p>

<pre><code class="language-python">&gt;&gt;&gt; from datetime import datetime
&gt;&gt;&gt; t = 1555579200.0
&gt;&gt;&gt; print(datetime.fromtimestamp(t))
2019-04-18 17:20:00
</code></pre>

<p><strong>str转换为datetime</strong></p>

<pre><code class="language-python">&gt;&gt;&gt; from datetime import datetime
&gt;&gt;&gt; cday = datetime.strptime('2019-4-20 15:19:53', '%Y-%m-%d %H:%M:%S')
&gt;&gt;&gt; print(cday)
2019-04-20 15:19:53
</code></pre>

<p><strong>datetime转换为str</strong></p>

<pre><code class="language-python">&gt;&gt;&gt; from datetime import datetime
&gt;&gt;&gt; now = datetime.now()
&gt;&gt;&gt; print(now.strftime('%a, %b %d %H:%M'))
Sat, Apr 26 15:20
</code></pre>

<p><strong>datetime加减</strong></p>

<pre><code class="language-python">&gt;&gt;&gt; from datetime import datetime, timedelta
&gt;&gt;&gt; now = datetime.now()
&gt;&gt;&gt; now
datetime.datetime(2019, 4, 20, 15, 7, 45, 249705)
&gt;&gt;&gt; now + timedelta(hours=10)
datetime.datetime(2019, 4, 21, 1, 7, 45, 249705)
&gt;&gt;&gt; now - timedelta(days=1)
datetime.datetime(2019, 4, 21, 15, 7, 45, 249705)
&gt;&gt;&gt; now + timedelta(days=2, hours=12)
datetime.datetime(2019, 4, 23, 3, 7, 45, 249705)
</code></pre>

<h3 id="collections">collections</h3>

<p>collections是Python内建的一个集合模块，提供了许多有用的集合类。</p>

<p><strong>namedtuple</strong></p>

<p><code>namedtuple</code>是一个函数，它可以创建一个自定义的<code>tuple</code>对象，并且规定了<code>tuple</code>元素的个数，可以用属性而不是索引来引用<code>tuple</code>的某个元素，而且创建的<code>Point</code>对象是<code>tuple</code>的一种子类：</p>

<pre><code class="language-python">&gt;&gt;&gt; from collections import namedtuple
&gt;&gt;&gt; Point = namedtuple('Point', ['x', 'y'])
&gt;&gt;&gt; p = Point(1, 2)
&gt;&gt;&gt; p.x
1
&gt;&gt;&gt; p.y
2
&gt;&gt;&gt; isinstance(p, Point)
True
&gt;&gt;&gt; isinstance(p, tuple)
True
# namedtuple('名称', [属性list]):
Circle = namedtuple('Circle', ['x', 'y', 'r'])
</code></pre>

<p><strong>deque</strong></p>

<p><code>deque</code>是为了高效实现插入和删除操作的双向列表，适合用于队列和栈，除了实现<code>list</code>的<code>append()</code>和<code>pop()</code>外，还支持<code>appendleft()</code>和<code>popleft()</code>，这样就可以非常高效地往头部添加或删除元素：</p>

<pre><code class="language-python">&gt;&gt;&gt; from collections import deque
&gt;&gt;&gt; q = deque(['a', 'b', 'c'])
&gt;&gt;&gt; q.appten('x')
&gt;&gt;&gt; q.appendleft('y')
&gt;&gt;&gt; q
deque(['y', 'a', 'b', 'c', 'x'])
</code></pre>

<p><strong>defaultdict</strong></p>

<p>使用<code>dict</code>时，若希望key不存在时，返回一个默认值，就可以用<code>defaultdict</code>，默认值是调用函数返回的，而函数在创建<code>defaultdict</code>对象时传入：</p>

<pre><code class="language-python">&gt;&gt;&gt; from collections import defaultdict
&gt;&gt;&gt; dd = defaultdict(lambda: 'N/A')
&gt;&gt;&gt; dd['key1'] = 'abc'
&gt;&gt;&gt; dd['key1'] # key1存在
'abc'
&gt;&gt;&gt; dd['key2'] # key2不存在，返回默认值
'N/A'
</code></pre>

<p><strong>OrderedDict</strong></p>

<p>使用<code>dict</code>时，Key是无序的，若要保持Key的顺序，可以<code>用OrderedDict</code>，Key会按照插入的顺序排列，不是Key本身排序：</p>

<pre><code class="language-python">&gt;&gt;&gt; from collections import OrderedDict
&gt;&gt;&gt; d = dict([('a', 1), ('b', 2), ('c', 3)])
&gt;&gt;&gt; d # dict的Key是无序的
{'a': 1, 'c': 3, 'b': 2}
&gt;&gt;&gt; od = OrderedDict([('a', 1), ('b', 2), ('c', 3)])
&gt;&gt;&gt; od # OrderedDict的Key是有序的
OrderedDict([('a', 1), ('b', 2), ('c', 3)])
</code></pre>

<p><strong>Counter</strong></p>

<p><code>Counter</code>是一个简单的计数器也是<code>dict</code>的一个子类，例如统计字符出现的个数：</p>

<pre><code class="language-python">&gt;&gt;&gt; from collections import Counter
&gt;&gt;&gt; c = Counter() # c = Counter('programming')
&gt;&gt;&gt; for ch in 'programming':
...     c[ch] = c[ch] + 1
...
&gt;&gt;&gt; c
Counter({'r': 2, 'g': 2, 'm': 2, 'p': 1, 'o': 1, 'a': 1, 'i': 1, 'n': 1})
</code></pre>

<h3 id="base64">base64</h3>

<pre><code class="language-python">&gt;&gt;&gt; import base64
&gt;&gt;&gt; base64.b64encode(b'binary\x00string')
b'YmluYXJ5AHN0cmluZw=='
&gt;&gt;&gt; base64.b64decode(b'YmluYXJ5AHN0cmluZw==')
b'binary\x00string'
&gt;&gt;&gt; base64.b64encode(b'i\xb7\x1d\xfb\xef\xff')
b'abcd++//'
&gt;&gt;&gt; base64.urlsafe_b64encode(b'i\xb7\x1d\xfb\xef\xff')
b'abcd--__'
&gt;&gt;&gt; base64.urlsafe_b64decode('abcd--__')
b'i\xb7\x1d\xfb\xef\xff'
</code></pre>

<p><strong>struct</strong></p>

<p><code>struct</code>模块来解决<code>bytes</code>和其他二进制数据类型的转换。<code>pack</code>函数把任意数据类型变成<code>bytes</code>，<code>unpack</code>把<code>bytes</code>变成相应的数据类型：</p>

<pre><code class="language-python">&gt;&gt;&gt; import struct
&gt;&gt;&gt; struct.pack('&gt;I', 10240099)
b'\x00\x9c@c'
&gt;&gt;&gt; struct.unpack('&gt;IH', b'\xf0\xf0\xf0\xf0\x80\x80')
(4042322160, 32896)
</code></pre>

<p>根据<code>&gt;IH</code>的说明，后面的<code>bytes</code>依次变为<code>I</code>：4字节无符号整数和<code>H</code>：2字节无符号整数。</p>

<p><strong>hashlib</strong></p>

<p>hashlib提供了常见的摘要算法，如MD5，SHA1等。</p>

<pre><code class="language-python">&gt;&gt;&gt; import hashlib
&gt;&gt;&gt; md5 = hashlib.md5()
&gt;&gt;&gt; md5.update('how to use md5 in python hashlib?'.encode('utf-8'))
&gt;&gt;&gt; print(md5.hexdigest())
d26a53750bc40b38b65a520292f69306
&gt;&gt;&gt; sha1 = hashlib.sha1()
&gt;&gt;&gt; sha1.update('how to use sha1 in '.encode('utf-8'))
&gt;&gt;&gt; sha1.update('python hashlib?'.encode('utf-8'))
&gt;&gt;&gt; print(sha1.hexdigest())
2c76b57293ce30acef38d98f6046927161b46a44
</code></pre>

<p><strong>hmac</strong></p>

<p>Hmac算法：Keyed-Hashing for Message Authentication。它通过一个标准算法，在计算哈希的过程中，把key混入计算过程中。</p>

<pre><code class="language-python">&gt;&gt;&gt; import hmac
&gt;&gt;&gt; message = b'Hello, world!'
&gt;&gt;&gt; key = b'secret'
&gt;&gt;&gt; h = hmac.new(key, message, digestmod='MD5')
&gt;&gt;&gt; h.hexdigest()
'fa4ee7d173f2d97ee79022d1a7355bcf'
</code></pre>

<p>验证用户口令：</p>

<pre><code class="language-python">import hmac, random

def hmac_md5(key, s):
    return hmac.new(key.encode('utf-8'), s.encode('utf-8'), 'MD5').hexdigest()

class User(object):
    def __init__(self, username, password):
        self.username = username
        self.key = ''.join([chr(random.randint(48, 122)) for i in range(20)])
        self.password = hmac_md5(self.key, password)

db = {
    'michael': User('michael', '123456'),
    'bob': User('bob', 'abc999'),
    'alice': User('alice', 'alice2008')
}

def login(username, password):
    user = db[username]
    return user.password == hmac_md5(user.key, password)

# 测试:
assert login('michael', '123456')
assert login('bob', 'abc999')
assert login('alice', 'alice2008')
assert not login('michael', '1234567')
assert not login('bob', '123456')
assert not login('alice', 'Alice2008')
print('ok')
</code></pre>

<p>所有的第三方模块都会在<a href="https://pypi.python.org/">PyPI</a>注册，只要找到对应的模块名字，即可用pip安装。</p>

                        </div>

                        


                        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/2019/04/python3-functional-programming/">Python3 学习笔记（函数式编程）</a></li>
        
        <li><a href="/2019/04/python3-functions/">Python3 学习笔记（函数）</a></li>
        
        <li><a href="/2019/04/python3-distributed-processes/">Python3 学习笔记（分布式进程）</a></li>
        
        <li><a href="/2019/04/python3-object-oriented-programming/">Python3 学习笔记（面向对象编程）</a></li>
        
        <li><a href="/2019/04/python3-advanced-features/">Python3 学习笔记（高级特性）</a></li>
        
    </ul>
</div>


                        <div class="post-meta meta-tags">
                            
                            <ul class="clearfix">
                                
                                <li><a href="https://qoanty.github.io/tags/python">python</a></li>
                                
                                <li><a href="https://qoanty.github.io/tags/functions">functions</a></li>
                                
                            </ul>
                            
                        </div>
                    </article>
                    
    

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "qoanty/qoanty.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
                </div>
            </div>
            <div id="secondary">
    <section class="widget">
        <form id="search" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://qoanty.github.io/">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://qoanty.github.io/2019/05/sliding-captcha/" title="极验滑动验证码识别">极验滑动验证码识别</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/2019/04/python3-web-scraping/" title="Python3 学习笔记（异步爬虫）">Python3 学习笔记（异步爬虫）</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/2019/04/python3-asyncio/" title="Python3 学习笔记（异步IO）">Python3 学习笔记（异步IO）</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/2019/04/python3-built-in-functions-modules/" title="Python3 学习笔记（内建模块）">Python3 学习笔记（内建模块）</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/2019/04/python3-distributed-processes/" title="Python3 学习笔记（分布式进程）">Python3 学习笔记（分布式进程）</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/2019/04/python3-object-oriented-programming/" title="Python3 学习笔记（面向对象编程）">Python3 学习笔记（面向对象编程）</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/2019/04/python3-functional-programming/" title="Python3 学习笔记（函数式编程）">Python3 学习笔记（函数式编程）</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/2019/04/python3-advanced-features/" title="Python3 学习笔记（高级特性）">Python3 学习笔记（高级特性）</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/2019/04/python3-functions/" title="Python3 学习笔记（函数）">Python3 学习笔记（函数）</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/2019/04/wss-and-web/" title="基于V2Ray的WebSocket&#43;TLS&#43;Web&#43;CDN安全网络代理">基于V2Ray的WebSocket&#43;TLS&#43;Web&#43;CDN安全网络代理</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">分类</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://qoanty.github.io/categories/blog/">Blog(1)</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/categories/captcha/">Captcha(1)</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/categories/hugo/">Hugo(1)</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/categories/learn/">Learn(8)</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/categories/python/">Python(10)</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/categories/v2ray/">V2Ray(2)</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/categories/vps/">VPS(2)</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/categories/vim/">Vim(1)</a>
    </li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title">标签</h3>
<div class="tagcloud">
    
    <a href="https://qoanty.github.io/tags/cdn/">CDN</a>
    
    <a href="https://qoanty.github.io/tags/github/">Github</a>
    
    <a href="https://qoanty.github.io/tags/hugo/">Hugo</a>
    
    <a href="https://qoanty.github.io/tags/ide/">IDE</a>
    
    <a href="https://qoanty.github.io/tags/oop/">OOP</a>
    
    <a href="https://qoanty.github.io/tags/v2ray/">V2Ray</a>
    
    <a href="https://qoanty.github.io/tags/vps/">VPS</a>
    
    <a href="https://qoanty.github.io/tags/asyncio/">asyncio</a>
    
    <a href="https://qoanty.github.io/tags/features/">features</a>
    
    <a href="https://qoanty.github.io/tags/functions/">functions</a>
    
    <a href="https://qoanty.github.io/tags/geetest/">geetest</a>
    
    <a href="https://qoanty.github.io/tags/processes/">processes</a>
    
    <a href="https://qoanty.github.io/tags/python/">python</a>
    
    <a href="https://qoanty.github.io/tags/scraping/">scraping</a>
    
    <a href="https://qoanty.github.io/tags/vim/">vim</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">友情链接</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://python3-cookbook.readthedocs.io/zh_CN/latest/index.html" title="Python Cookbook 3rd Edition">Python Cookbook</a>
        </li>
        
        <li>
            <a target="_blank" href="https://seancheney.gitbook.io/python-for-data-analysis-2nd/" title="Python for Data Analysis 2nd Edition">Python for Data Analysis</a>
        </li>
        
        <li>
            <a target="_blank" href="https://codelabs.developers.google.com/codelabs/cloud-tensorflow-mnist/#0" title="TensorFlow and deep learning, without a PhD">TensorFlow and deep learning</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://qoanty.github.io/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
        </div>
    </div>
</div>
<footer id="footer">
    <div class="container">
        &copy; 2019 <a href="https://qoanty.github.io/">百年孤独的博客 By 百年孤独</a>.
        Powered by <a rel="nofollow noreferer noopener" href="https://gohugo.io" target="_blank">Hugo</a> & <a href="https://github.com/rujews/maupassant-hugo" target="_blank">maupassant</a>.
        
    </div>
</footer>


    <script type="text/javascript">
    
    (function(){
        $("pre code").parent().addClass("line-numbers")
    }())

    window.MathJax = {
        tex2jax: {
            inlineMath: [ ['$','$'] ],
            processEscapes: true
        }
    };
    </script>
    <script type="text/javascript" src="/js/prism.js" async="true"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src="/js/totop.js?v=0.0.0" async=""></script>







</body>
</html>
