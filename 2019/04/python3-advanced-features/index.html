<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta name="generator" content="Hugo 0.54.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Python3 学习笔记（高级特性） | 百年孤独的博客</title>
    <meta property="og:title" content="Python3 学习笔记（高级特性） - 百年孤独的博客">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content="2019-04-19T15:04:36&#43;08:00">
        
        
    <meta property="article:modified_time" content="2019-04-19T15:04:36&#43;08:00">
        
    <meta name="Keywords" content="VPS, python, android, 博客, 小程序">
    <meta name="description" content="Python3 学习笔记（高级特性）">
        
    <meta name="author" content="百年孤独">
    <meta property="og:url" content="https://qoanty.github.io/2019/04/python3-advanced-features/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="/css/normalize.css">
    
        <link rel="stylesheet" href="/css/prism.css">
    
    <link rel="stylesheet" href="/css/style.css">
    <script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>

    


    
    
</head>

<body>
<header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://qoanty.github.io/">
                        百年孤独的博客
                    </a>
                
                <p class="description">艺术家用谎言揭露真相，政治家用谎言隐瞒真相</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://qoanty.github.io/">首页</a>
                    
                    <a  href="https://qoanty.github.io/tools/" title="工具">工具</a>
                    
                    <a  href="https://qoanty.github.io/archives/" title="归档">归档</a>
                    
                    <a  href="https://qoanty.github.io/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>


<div id="body">
    <div class="container">
        <div class="col-group">

            <div class="col-8" id="main">
                <div class="res-cons">
                    <article class="post">
                        <header>
                            <h1 class="post-title">Python3 学习笔记（高级特性）</h1>
                        </header>
                        <date class="post-meta meta-date">
                            2019年4月19日
                        </date>
                        
                        <div class="post-meta">
                            <span>|</span>
                            
                                <span class="meta-category"><a href="https://qoanty.github.io/categories/learn">Learn</a></span>
                            
                                <span class="meta-category"><a href="https://qoanty.github.io/categories/python">Python</a></span>
                            
                        </div>
                        
                        
                        
                        <div class="post-content">
                            

<h2 id="高级特性">高级特性</h2>

<p>在Python中，代码不是越多越好，而是越少越好。代码不是越复杂越好，而是越简单越好，代码越少，开发效率越高。</p>

<h3 id="切片">切片</h3>

<p>先创建一个0-99的数列：</p>

<pre><code class="language-python">&gt;&gt;&gt; L = list(range(100))
&gt;&gt;&gt; L
[0, 1, 2, 3, ..., 99]
</code></pre>

<p>可以通过切片轻松取出某一段数列。比如前10个数：</p>

<pre><code class="language-python">&gt;&gt;&gt; L[:10]
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
</code></pre>

<p>后10个数：</p>

<pre><code class="language-python">&gt;&gt;&gt; L[-10:]
[90, 91, 92, 93, 94, 95, 96, 97, 98, 99]
</code></pre>

<p>前11-20个数：</p>

<pre><code class="language-python">&gt;&gt;&gt; L[10:20]
[10, 11, 12, 13, 14, 15, 16, 17, 18, 19]
</code></pre>

<p>前10个数，每两个取一个：</p>

<pre><code class="language-python">&gt;&gt;&gt; L[:10:2]
[0, 2, 4, 6, 8]
</code></pre>

<p>所有数，每5个取一个：</p>

<pre><code class="language-python">&gt;&gt;&gt; L[::5]
[0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95]
</code></pre>

<p>甚至什么都不写，只写<code>[:]</code>就可以原样复制一个list：</p>

<pre><code class="language-python">&gt;&gt;&gt; L[:]
[0, 1, 2, 3, ..., 99]
</code></pre>

<p>tuple也是一种list，唯一区别是tuple不可变。因此，tuple也可以用切片操作，只是操作的结果仍是tuple。</p>

<p>字符串<code>'xxx'</code>也可以看成是一种list，每个元素就是一个字符。因此，字符串也可以用切片操作，只是操作结果仍是字符串。</p>

<h3 id="迭代">迭代</h3>

<p>给定一个list或tuple，我们可以通过<code>for</code>循环来遍历这个list或tuple，这种遍历我们称为迭代（Iteration），在Python中，迭代是通过<code>for ... in</code>来完成的。</p>

<p>只要是可迭代对象，无论有无下标，都可以迭代，字符串也是可迭代对象，dict也可以迭代，默认情况下，dict迭代的是key，如果要迭代value，可以用<code>for value in d.values()</code>，如果要同时迭代key和value，可以用<code>for k, v in d.items()</code>。</p>

<p>判断一个对象是可迭代对象的方法是通过collections模块的Iterable类型判断：</p>

<pre><code class="language-python">&gt;&gt;&gt; from collections import Iterable
&gt;&gt;&gt; isinstance('abc', Iterable) # str是否可迭代
True
&gt;&gt;&gt; isinstance([1,2,3], Iterable) # list是否可迭代
True
&gt;&gt;&gt; isinstance(123, Iterable) # 整数是否可迭代
False
</code></pre>

<h3 id="列表生成式">列表生成式</h3>

<p>列表生成式即List Comprehensions，是Python内置的非常简单却强大的可以用来创建list的生成式。</p>

<p>要生成[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]列表，可以用：</p>

<pre><code class="language-python">&gt;&gt;&gt; list(range(1, 11))
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
</code></pre>

<p>如果要生成[1x1, 2x2, 3x3, &hellip;, 10x10]列表，则可以用一行语句代替循环生成的list：</p>

<pre><code class="language-python">&gt;&gt;&gt; [x * x for x in range(1, 11)]
[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]
</code></pre>

<p>写列表生成式时，把要生成的元素<code>x * x</code>放到前面，后面跟<code>for</code>循环，就可以把list创建出来，for循环后面还可以加上if判断，这样就可以筛选出仅偶数的平方：</p>

<pre><code class="language-python">&gt;&gt;&gt; [x * x for x in range(1, 11) if x % 2 == 0]
[4, 16, 36, 64, 100]
</code></pre>

<p>还可以使用两层循环，可以生成全排列：</p>

<pre><code class="language-python">&gt;&gt;&gt; [m + n for m in 'ABC' for n in 'XYZ']
['AX', 'AY', 'AZ', 'BX', 'BY', 'BZ', 'CX', 'CY', 'CZ']
</code></pre>

<p>运用列表生成式，可以写出非常简洁的代码。例如，列出当前目录下的所有文件和目录名：</p>

<pre><code class="language-python">&gt;&gt;&gt; import os # 导入os模块
&gt;&gt;&gt; [d for d in os.listdir('.')] # os.listdir可以列出文件和目录
</code></pre>

<p>列表生成式也可以使用两个变量来生成list：</p>

<pre><code class="language-python">&gt;&gt;&gt; d = {'x': 'A', 'y': 'B', 'z': 'C' }
&gt;&gt;&gt; [k + '=' + v for k, v in d.items()]
['y=B', 'x=A', 'z=C']
</code></pre>

<p>把一个list中所有的字符串变成小写：</p>

<pre><code class="language-python">&gt;&gt;&gt; L = ['Hello', 'World', 18, 'Apple', None]
&gt;&gt;&gt; [s.lower() for s in L if isinstance(s, str)]
['hello', 'world', 'apple']
</code></pre>

<h3 id="生成器">生成器</h3>

<p>通过列表生成式创建的列表，受到内存限制，列表容量是有限的。如果列表元素可以按照某种算法推算出来，就不必创建完整的list，从而节省大量的空间，这种一边循环一边计算的机制，称为生成器：generator。</p>

<p>要创建一个generator，有很多种方法。第一种方法很简单，只要把一个列表生成式的<code>[]</code>改成<code>()</code>，就创建了一个generator：</p>

<pre><code class="language-python">&gt;&gt;&gt; L = [x * x for x in range(10)]
&gt;&gt;&gt; L
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]
&gt;&gt;&gt; g = (x * x for x in range(10))
&gt;&gt;&gt; g
&lt;generator object &lt;genexpr&gt; at 0x1022ef630&gt;
</code></pre>

<p>可以通过<code>for</code>循环来迭代它：</p>

<pre><code class="language-python">&gt;&gt;&gt; g = (x * x for x in range(10))
&gt;&gt;&gt; for n in g:
...     print(n)
...
</code></pre>

<p>如果推算的算法比较复杂，用类似列表生成式的<code>for</code>循环无法实现的时候，还可以用函数来实现。</p>

<p>例如，斐波拉契数列用列表生成式写不出来，但是用函数把它打印出来却很容易：</p>

<pre><code class="language-python">def fib(max):
    n, a, b = 0, 0, 1
    while n &lt; max:
        print(b)
        a, b = b, a + b
        n = n + 1
    return 'done'
</code></pre>

<p>要把上面<code>fib</code>函数变成generator，只需要把<code>print(b)</code>改为<code>yield b</code>就可以了：</p>

<pre><code class="language-python">def fib(max):
    n, a, b = 0, 0, 1
    while n &lt; max:
        yield b
        a, b = b, a + b
        n = n + 1
    return 'done'
</code></pre>

<p>这就是定义generator的另一种方法。如果一个函数定义中包含<code>yield</code>关键字，那么这个函数就不再是一个普通函数，而是一个generator，可以使用<code>for</code>循环来迭代：</p>

<pre><code class="language-python">&gt;&gt;&gt; for n in fib(6):
...     print(n)
...
1
1
2
3
5
8
</code></pre>

<p>但是用<code>for</code>循环调用generator时，会得不到generator的<code>return</code>语句的返回值。如果想要得到返回值，必须捕获<code>StopIteration</code>错误，返回值包含在<code>StopIteration</code>的<code>value</code>中。</p>

<p>实例：杨辉三角</p>

<pre><code class="language-python">def triangles():
    L = [1]
    while True:
        yield L
        L = [sum(i) for i in zip([0] + L, L + [0])]

n = 0
for t in triangles():
    print(t)
    n = n + 1
    if n == 10:
        break
</code></pre>

<h3 id="迭代器">迭代器</h3>

<p>可直接作用于<code>for</code>循环的数据类型有：一类是集合数据类型，如<code>list</code>、<code>tuple</code>、<code>dict</code>、<code>set</code>、<code>str</code>等；一类是<code>generator</code>，包括生成器和带<code>yield</code>的generator function，这些统称为可迭代对象：<code>Iterable</code>，可以使用<code>isinstance()</code>进行判断。</p>

<pre><code class="language-python">&gt;&gt;&gt; from collections import Iterable
&gt;&gt;&gt; isinstance([], Iterable)
True
&gt;&gt;&gt; isinstance({}, Iterable)
True
&gt;&gt;&gt; isinstance('abc', Iterable)
True
&gt;&gt;&gt; isinstance((x for x in range(10)), Iterable)
True
&gt;&gt;&gt; isinstance(100, Iterable)
False
</code></pre>

<p>可以被<code>next()</code>函数调用并不断返回下一个值的对象称为迭代器：<code>Iterator</code>，可以使用<code>isinstance()</code>进行判断。</p>

<pre><code class="language-python">&gt;&gt;&gt; from collections import Iterator
&gt;&gt;&gt; isinstance((x for x in range(10)), Iterator)
True
&gt;&gt;&gt; isinstance([], Iterator)
False
&gt;&gt;&gt; isinstance({}, Iterator)
False
&gt;&gt;&gt; isinstance('abc', Iterator)
False
</code></pre>

<p>生成器都是<code>Iterator</code>对象，但<code>list</code>、<code>dict</code>、<code>str</code>虽然是<code>Iterable</code>，但不是<code>Iterator</code>，若要变成<code>Iterator</code>可以使用<code>iter()</code>函数。</p>

<pre><code class="language-python">&gt;&gt;&gt; isinstance(iter([]), Iterator)
True
&gt;&gt;&gt; isinstance(iter('abc'), Iterator)
True
</code></pre>

<p>Python的<code>Iterator</code>对象表示的是一个数据流，我们可以看做是一个有序序列，但不能提前知道序列的长度，只能不断通过<code>next()</code>函数实现按需计算下一个数据，所以<code>Iterator</code>的计算是惰性的，只有在需要返回下一个数据时它才会计算。</p>

                        </div>

                        


                        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/2019/04/python3-functions/">Python3 学习笔记（函数）</a></li>
        
        <li><a href="/2019/04/wss-and-web/">基于V2Ray的WebSocket&#43;TLS&#43;Web&#43;CDN安全网络代理</a></li>
        
        <li><a href="/2019/04/vps-with-v2ray/">使用V2Ray实现科学爱国</a></li>
        
        <li><a href="/2019/04/blog-with-hugo/">使用Hugo搭建个人博客</a></li>
        
        <li><a href="/2019/04/vim-python/">windows 10下使用vim8配置python3开发环境</a></li>
        
    </ul>
</div>


                        <div class="post-meta meta-tags">
                            
                            <ul class="clearfix">
                                
                                <li><a href="https://qoanty.github.io/tags/python">python</a></li>
                                
                                <li><a href="https://qoanty.github.io/tags/features">features</a></li>
                                
                            </ul>
                            
                        </div>
                    </article>
                    
    

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "qoanty/qoanty.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
                </div>
            </div>
            <div id="secondary">
    <section class="widget">
        <form id="search" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://qoanty.github.io/">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://qoanty.github.io/2019/05/sliding-captcha/" title="极验滑动验证码识别">极验滑动验证码识别</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/2019/04/python3-web-scraping/" title="Python3 学习笔记（异步爬虫）">Python3 学习笔记（异步爬虫）</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/2019/04/python3-asyncio/" title="Python3 学习笔记（异步IO）">Python3 学习笔记（异步IO）</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/2019/04/python3-built-in-functions-modules/" title="Python3 学习笔记（内建模块）">Python3 学习笔记（内建模块）</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/2019/04/python3-distributed-processes/" title="Python3 学习笔记（分布式进程）">Python3 学习笔记（分布式进程）</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/2019/04/python3-object-oriented-programming/" title="Python3 学习笔记（面向对象编程）">Python3 学习笔记（面向对象编程）</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/2019/04/python3-functional-programming/" title="Python3 学习笔记（函数式编程）">Python3 学习笔记（函数式编程）</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/2019/04/python3-advanced-features/" title="Python3 学习笔记（高级特性）">Python3 学习笔记（高级特性）</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/2019/04/python3-functions/" title="Python3 学习笔记（函数）">Python3 学习笔记（函数）</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/2019/04/wss-and-web/" title="基于V2Ray的WebSocket&#43;TLS&#43;Web&#43;CDN安全网络代理">基于V2Ray的WebSocket&#43;TLS&#43;Web&#43;CDN安全网络代理</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">分类</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://qoanty.github.io/categories/blog/">Blog(1)</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/categories/captcha/">Captcha(1)</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/categories/hugo/">Hugo(1)</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/categories/learn/">Learn(8)</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/categories/python/">Python(10)</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/categories/v2ray/">V2Ray(2)</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/categories/vps/">VPS(2)</a>
    </li>
    
    <li>
        <a href="https://qoanty.github.io/categories/vim/">Vim(1)</a>
    </li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title">标签</h3>
<div class="tagcloud">
    
    <a href="https://qoanty.github.io/tags/cdn/">CDN</a>
    
    <a href="https://qoanty.github.io/tags/github/">Github</a>
    
    <a href="https://qoanty.github.io/tags/hugo/">Hugo</a>
    
    <a href="https://qoanty.github.io/tags/ide/">IDE</a>
    
    <a href="https://qoanty.github.io/tags/oop/">OOP</a>
    
    <a href="https://qoanty.github.io/tags/v2ray/">V2Ray</a>
    
    <a href="https://qoanty.github.io/tags/vps/">VPS</a>
    
    <a href="https://qoanty.github.io/tags/asyncio/">asyncio</a>
    
    <a href="https://qoanty.github.io/tags/features/">features</a>
    
    <a href="https://qoanty.github.io/tags/functions/">functions</a>
    
    <a href="https://qoanty.github.io/tags/geetest/">geetest</a>
    
    <a href="https://qoanty.github.io/tags/processes/">processes</a>
    
    <a href="https://qoanty.github.io/tags/python/">python</a>
    
    <a href="https://qoanty.github.io/tags/scraping/">scraping</a>
    
    <a href="https://qoanty.github.io/tags/vim/">vim</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">友情链接</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://python3-cookbook.readthedocs.io/zh_CN/latest/index.html" title="Python Cookbook 3rd Edition">Python Cookbook</a>
        </li>
        
        <li>
            <a target="_blank" href="https://seancheney.gitbook.io/python-for-data-analysis-2nd/" title="Python for Data Analysis 2nd Edition">Python for Data Analysis</a>
        </li>
        
        <li>
            <a target="_blank" href="https://codelabs.developers.google.com/codelabs/cloud-tensorflow-mnist/#0" title="TensorFlow and deep learning, without a PhD">TensorFlow and deep learning</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://qoanty.github.io/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
        </div>
    </div>
</div>
<footer id="footer">
    <div class="container">
        &copy; 2019 <a href="https://qoanty.github.io/">百年孤独的博客 By 百年孤独</a>.
        Powered by <a rel="nofollow noreferer noopener" href="https://gohugo.io" target="_blank">Hugo</a> & <a href="https://github.com/rujews/maupassant-hugo" target="_blank">maupassant</a>.
        
    </div>
</footer>


    <script type="text/javascript">
    
    (function(){
        $("pre code").parent().addClass("line-numbers")
    }())

    window.MathJax = {
        tex2jax: {
            inlineMath: [ ['$','$'] ],
            processEscapes: true
        }
    };
    </script>
    <script type="text/javascript" src="/js/prism.js" async="true"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src="/js/totop.js?v=0.0.0" async=""></script>







</body>
</html>
